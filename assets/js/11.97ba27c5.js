(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{358:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"智能合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#智能合约"}},[s._v("#")]),s._v(" 智能合约")]),s._v(" "),a("p",[s._v("高老师牵头的，学校5G联创实验室肖泳老师的项目，联邦学习与区块链的结合，把ai放区块链上跑")]),s._v(" "),a("p",[s._v("训练的参数和中间结果上链，使得模型之间互不影响，模型的产出")]),s._v(" "),a("p",[s._v("分布式AI")]),s._v(" "),a("p",[s._v("实时性")]),s._v(" "),a("p",[s._v("go")]),s._v(" "),a("h2",{attrs:{id:"bfc-2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bfc-2-0"}},[s._v("#")]),s._v(" BFC 2.0")]),s._v(" "),a("p",[s._v("分账算法")]),s._v(" "),a("h2",{attrs:{id:"algo算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#algo算法"}},[s._v("#")]),s._v(" Algo算法")]),s._v(" "),a("h2",{attrs:{id:"filecoin共识算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filecoin共识算法"}},[s._v("#")]),s._v(" filecoin共识算法")]),s._v(" "),a("p",[s._v("存储证明的共识算法")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/filecoin-project/rust-fil-proofs",target:"_blank",rel:"noopener noreferrer"}},[s._v("rust-fil-proofs"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("Filecoin Proving Subsystem")]),s._v(" (or FPS)")]),s._v(" "),a("p",[s._v("Filecoin最具特色的功能之一是其可验证的存储方式")]),s._v(" "),a("h3",{attrs:{id:"filecoin理论基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filecoin理论基础"}},[s._v("#")]),s._v(" Filecoin理论基础")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://proto.school/verifying-storage-on-filecoin",target:"_blank",rel:"noopener noreferrer"}},[s._v("教程:\tVerifying Storage on Filecoin"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"_0、存储和数据准备、传输"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0、存储和数据准备、传输"}},[s._v("#")]),s._v(" 0、存储和数据准备、传输")]),s._v(" "),a("h5",{attrs:{id:"激励存储"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#激励存储"}},[s._v("#")]),s._v(" 激励存储")]),s._v(" "),a("p",[s._v("Filecoin 增加了一个激励层，用于在分散的 Web 上促进长期、可验证的存储")]),s._v(" "),a("h5",{attrs:{id:"加密证明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加密证明"}},[s._v("#")]),s._v(" 加密证明")]),s._v(" "),a("p",[s._v("Filecoin 用于验证存储的加密证明**，称为复制证明 （PoRep）** "),a("strong",[s._v("和时空证明 （PoSt）")])]),s._v(" "),a("p",[s._v("Filecoin 协议不提供加密，但您可以使用它来存储加密数据")]),s._v(" "),a("p",[s._v("区块链通常使用工作证明（意味着计算或处理能力），而 Filecoin 的证明是有用存储的证明（一种赌注证明）")]),s._v(" "),a("h5",{attrs:{id:"准备和传输数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备和传输数据"}},[s._v("#")]),s._v(" 准备和传输数据")]),s._v(" "),a("p",[s._v("系统文件转化为Filecoin Piece")]),s._v(" "),a("p",[s._v("有唯一的CIDs，即DAG的根节点")]),s._v(" "),a("h5",{attrs:{id:"转化步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#转化步骤"}},[s._v("#")]),s._v(" 转化步骤")]),s._v(" "),a("p",[s._v("创建IPLD DAG（定向非循环图）， 序列化成CAR文件并填充位")]),s._v(" "),a("p",[s._v("sector（扇区）：基本的存储单元")]),s._v(" "),a("p",[s._v("扇区是 Filecoin 中的基本存储单元，可以包含来自多个交易和客户端的片段")]),s._v(" "),a("p",[s._v("piece CID 包装得到Deal Proposal（由客户生成）")]),s._v(" "),a("p",[s._v("deal CID包括矿工和客户的身份以及其他重要的交易细节，以piece CID的形式")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-cd5e51c473429b66cd630fa6a0757e13_720w.jpg",alt:"img"}})]),s._v(" "),a("h4",{attrs:{id:"_1、porep"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、porep"}},[s._v("#")]),s._v(" 1、PoRep")]),s._v(" "),a("p",[s._v("就是Proof of Replicate 复制证明")]),s._v(" "),a("p",[s._v("运行一次以证明矿工在扇区密封时存储了数据的物理唯一副本")]),s._v(" "),a("h5",{attrs:{id:"填充扇区并生成-commd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#填充扇区并生成-commd"}},[s._v("#")]),s._v(" 填充扇区并生成 CommD")]),s._v(" "),a("p",[s._v("扇区满后，将生成 CommD（Commitment of Data, aka UnsealedSectorCID），表示扇区中包含的所有片断 CID 的根节点。")]),s._v(" "),a("h5",{attrs:{id:"密封扇区并生成-commr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密封扇区并生成-commr"}},[s._v("#")]),s._v(" 密封扇区并生成 CommR")]),s._v(" "),a("p",[s._v("生成独立副本，副本的merkle树的根哈希是 CommRLast，在矿机私有保存")]),s._v(" "),a("p",[s._v("CommRLast 和 CommitC（另一个merkle根输出）一起哈希生成CommR（Commitment of Replication, aka SealedSectorCID），并公开到区块链")]),s._v(" "),a("p",[s._v("node.go代码在启动挖矿时，每120个区块调用一次SealAllStagedSectors函数（将所有的Staged的Sector数据进行Seal）。")]),s._v(" "),a("p",[s._v("在filecoin-proof模块接收到请求后，确认目前所有的Staged的Sector，并对每个Sector进行Seal。")]),s._v(" "),a("p",[a("strong",[s._v("Replica ID")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rust-fil-proofs/storage-proofs/src/seal.rs\n\nseal_pre_commit_phase1\nseal_pre_commit_phase2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("storage_proofs::porep::stacked::generate_replica_id\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2、post"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、post"}},[s._v("#")]),s._v(" 2、PoSt")]),s._v(" "),a("p",[s._v("（Proof of Space Time) 时空证明")]),s._v(" "),a("p",[s._v("重复运行以证明他们随着时间的推移继续将存储空间专用于同一数据")]),s._v(" "),a("p",[s._v("随机选择一些叶子节点，运行merkle包含证明")]),s._v(" "),a("p",[s._v("CommRLast CommR")]),s._v(" "),a("h4",{attrs:{id:"_3、zk-snarks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、zk-snarks"}},[s._v("#")]),s._v(" 3、zk - SNARKs")]),s._v(" "),a("p",[s._v("零知识的简介非交互式的知识参数，可视为计算哈希")]),s._v(" "),a("p",[s._v("Filecoin 中的复制证明和时空过程证明都使用 zk-SNARK 进行压缩")]),s._v(" "),a("p",[s._v("计算成本高，但最终产品小，数百 KB 的证明压缩为 192 字节，减小存储；同时验证过程非常快")]),s._v(" "),a("h3",{attrs:{id:"filecoin-porep和post算法源代码导读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filecoin-porep和post算法源代码导读"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/60849559",target:"_blank",rel:"noopener noreferrer"}},[s._v("Filecoin - PoRep和PoSt算法源代码导读"),a("OutboundLink")],1)]),s._v(" "),a("ol",[a("li",[a("p",[s._v("go-filecoin")])]),s._v(" "),a("li",[a("p",[s._v("rust-fil-proofs")])]),s._v(" "),a("li",[a("p",[s._v("bellman(zk-SNARKs)")])])]),s._v(" "),a("p",[s._v("filecoin-proofs实现了filecoin存储证明的接口，依赖其他两个模块：storage-proofs（存储证明的逻辑）和 sector-base （数据存储的接口）。这两个模块又依赖于storage-backend模块实现数据的存储。")]),s._v(" "),a("p",[a("strong",[s._v("PoRep的生成和验证逻辑")])]),s._v(" "),a("p",[a("strong",[s._v("PoSt的生成和验证逻辑")])]),s._v(" "),a("p",[s._v("PoRep是对某个Sector数据存储的证明，每个Sector一次。PoSt是一系列已经Seal过的Sector的存储证明，每隔一段时间一次。两个证明的核心是Groth16零知识验证算法")]),s._v(" "),a("p",[s._v("在一个存储矿工存储（Seal）用户数据后，每隔20000个区块，必须提供一次PoSt（Proof of Space Time)的证明")]),s._v(" "),a("p",[s._v("某个存储矿工还存有用户数据的证明。20000个区块，一个区块30秒，也就说每6天提交一次证明")]),s._v(" "),a("h4",{attrs:{id:"rust-fil-proofs的框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rust-fil-proofs的框架"}},[s._v("#")]),s._v(" rust-fil-proofs的框架")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("storage-proofs：库 A "),a("strong",[s._v("library")]),s._v(" for constructing storage proofs – including non-circuit proofs, corresponding SNARK circuits, and a method of combining them")])]),s._v(" "),a("li",[a("p",[s._v("Filecoin Proofs：storage-proofs的封装, FFI-exported "),a("strong",[s._v("API")]),s._v(" callable from C (and in practice called by "),a("a",{attrs:{href:"https://github.com/filecoin-project/lotus",target:"_blank",rel:"noopener noreferrer"}},[s._v("lotus"),a("OutboundLink")],1),s._v(" via cgo).")])])]),s._v(" "),a("h3",{attrs:{id:"存储管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存储管理"}},[s._v("#")]),s._v(" 存储管理")]),s._v(" "),a("p",[s._v("Store - Sector存储系统 一般32G")]),s._v(" "),a("p",[s._v("包含3种存储，unsealed， cache，sealed")]),s._v(" "),a("p",[s._v("Worker通过jsonRPC通信，Worker1处理P1，Worker2处理P2")]),s._v(" "),a("p",[s._v("AddPiece 在unsealed中创建原始数据")]),s._v(" "),a("p",[s._v("PreCommit1 针对SDR算法，计算若干层数据 11层结构 32G * 11")]),s._v(" "),a("p",[s._v("PreCommit2 生成Replica，计算Column Hash，创建merkle树(tree_d，tree_c，tree_r_last)")]),s._v(" "),a("p",[s._v("当sector32G时")]),s._v(" "),a("ul",[a("li",[s._v("原始数据 - 32G")]),s._v(" "),a("li",[s._v("原始数据 Mercle - 32G")]),s._v(" "),a("li",[s._v("P1 layer - 32G * 11")]),s._v(" "),a("li",[s._v("P2 Column Hash & tree_c - 32*2G")]),s._v(" "),a("li",[s._v("P2 Replica & tree_r_last - 32G + 9.2M * 8")])]),s._v(" "),a("p",[s._v("Commit生成证明后，finalize归档会删除不需要持久化的数据，持久化的数据传输回Manager")]),s._v(" "),a("h3",{attrs:{id:"零知识证明-zksnark入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#零知识证明-zksnark入门"}},[s._v("#")]),s._v(" 零知识证明 - zkSNARK入门")]),s._v(" "),a("p",[s._v("NP 非确定性多项式 不能在多项式内可解，但可以验证；NP问题可以相互归约")]),s._v(" "),a("p",[s._v("QSP（基于布尔电路的NP问题的证明和验证）是个NP问题：给定一系列的多项式，以及给定一个目标多项式，找出多项式的组合能整除目标多项式")]),s._v(" "),a("p",[s._v("QAP（基于算术电路的NP问题），有更好的普适性")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/IXicdJl0t7b6YpP4WZ3AxGRsoBglEb4WQxZrKuXgpHs8dp7yQ6YKTI7vR2fTlEcquuTlOTInpPeaibibzYLzHHlnQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),s._v(" "),a("p",[s._v("1/ 问题转化:  一个需要证明的NP问题转化为选定的NP问题（比如QSP问题）")]),s._v(" "),a("p",[s._v("2/ 设置参数（setup）：设置参数的过程也是挑选随机数的过程，并提供CRS")]),s._v(" "),a("p",[s._v("3/ 证明者获取证据u，通过CRS计算证据（proof）")]),s._v(" "),a("p",[s._v("4/ 验证者验证证据以及响应的proof")]),s._v(" "),a("p",[s._v("证据（Witness）u")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/IXicdJl0t7b6YpP4WZ3AxGRsoBglEb4WQ7p23hltvKPz8WXJ9K2BND1LQ2gx8evBiaGibaHFphu9hVibKL11QvrPJA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"bellman源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bellman源码"}},[s._v("#")]),s._v(" bellman源码")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/IXicdJl0t7b5oaDhzxs3AP6MczGibs8nSzupOrqibA73H3NKxtbtVxjMTywxPiaKDGuV7kVcbHbNvjDIcr5gMSxzrQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),s._v(" "),a("p",[s._v("总体流程")]),s._v(" "),a("p",[s._v("1.将问题多项式拍平（flatten），构建对应的电路（Circuit）")]),s._v(" "),a("p",[s._v("（这一步是由上层应用程序配置的）\n2.根据电路生成R1CS（Rank 1 Constraint System）\n3.将R1CS转化为QAP（Quadratic Arithmetic Program）。传统做法是通过拉格朗日插值，但是为了降低计算复杂度，可以通过快速傅立叶变换来实现。\n4.初始化QAP问题的参数，即CRS（Common Reference Strings）\n5.根据CRS和输入创建proof\n6.验证proof")]),s._v(" "),a("p",[s._v("Parameters")]),s._v(" "),a("p",[s._v("Variable类型代表输入数据中的每一个值，分为公开的statement数据和私有的witness数据：")]),s._v(" "),a("ul",[a("li",[s._v("Input类型：即statement数据")]),s._v(" "),a("li",[s._v("Aux类型：即witness数据")])]),s._v(" "),a("p",[s._v("ConstraintSystem产生Input、Aux类型的变量")]),s._v(" "),a("p",[s._v("Circuit的synthesize()会调用ConstraintSystem的enforce()构建R1CS")]),s._v(" "),a("p",[s._v("KeypairAssembly是ConstraintSystem的一个实现，R1CS的参数会保存在其成员变量中")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("groth16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("generator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("generate_parameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" assembly "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("KeypairAssembly")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("new")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Synthesize the circuit.")]),s._v("\n    circuit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("synthesize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" assembly"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Use inverse FFT to convert powers of tau to Lagrange coefficients")]),s._v("\n    powers_of_tau"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("None")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" powers_of_tau "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" powers_of_tau"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("into_coeffs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("3、创建Proof")]),s._v(" "),a("p",[s._v("生成proof的时候使用的是ConstraintSystem的另外一个实现ProvingAssignment来调用Circuit的synthesize()函数")]),s._v(" "),a("p",[s._v("显然我们是不能除以零的，因此需要对x做一定的“变换”或者“偏移”。用bellman里的术语，叫做从“Evaluation Domain”转换到“Coset”上")]),s._v(" "),a("p",[s._v("4、验证阶段")]),s._v(" "),a("h3",{attrs:{id:"任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务"}},[s._v("#")]),s._v(" 任务")]),s._v(" "),a("p",[s._v("rust-fli-proof代码在cpu/gpu的对比测试\n微服务模式\n目前filecoin的存储证明模块都是调用rust-fli-proof，在耗时部分的测试后，我们的工作是将rust部分做成一个单独的微服务架构（考虑能充分利用gpu加速）")]),s._v(" "),a("p",[s._v("winning-post?")]),s._v(" "),a("p",[s._v("window-post？")]),s._v(" "),a("p",[s._v("改变文件大小进行测试 4K 1M")]),s._v(" "),a("h3",{attrs:{id:"测试结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试结果"}},[s._v("#")]),s._v(" 测试结果")]),s._v(" "),a("h4",{attrs:{id:"_1、run-merkleproofs-bench"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、run-merkleproofs-bench"}},[s._v("#")]),s._v(" 1、run_merkleproofs_bench")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('cargo run --release --bin benchy -- merkleproofs --size 2\n\ninfo!(\n    "generating merkle tree for sector size {} [base_tree_leaves {}, tree_count {}]",\n    size, base_tree_leaves, tree_count\n);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"_2、winning-post"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、winning-post"}},[s._v("#")]),s._v(" 2、winning-post")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('info!("Benchy Winning PoSt: sector-size={}", sector_size,);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200831085629874.png",alt:"image-20200831085629874"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200831122522982.png",alt:"image-20200831122522982"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200831151020726.png",alt:"image-20200831151020726"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200902181635124.png",alt:"image-20200902181635124"}})]),s._v(" "),a("h4",{attrs:{id:"_3、window-post"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、window-post"}},[s._v("#")]),s._v(" 3、window-post")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200831085704959.png",alt:"image-20200831085704959"}})]),s._v(" "),a("p",[s._v("This is required since hashers are dependent on sector size")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200902183844955.png",alt:"image-20200902183844955"}})]),s._v(" "),a("h4",{attrs:{id:"_4、prodbench"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、prodbench"}},[s._v("#")]),s._v(" 4、prodbench")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('cargo run --release --bin benchy -- prodbench --config prodbench_inputs.json\n\nprodbench_inputs.json\n{\n "sector_size": "2048",\n "porep_challenges": 4,\n "porep_partitions": 1,\n "post_challenges": 2,\n "post_challenged_nodes": 4,\n "stacked_layers": 2,\n "num_sectors": 1\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h5",{attrs:{id:"代码逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码逻辑"}},[s._v("#")]),s._v(" 代码逻辑")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("prodbench"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("shared"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("create_replicas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("shared"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("create_piece\n        filecoin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("proofs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add_piece")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//数据补充完整")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("filecoin_proofs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("seal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("seal_pre_commit_phase1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//数据编码")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("filecoin_proofs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("seal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("seal_pre_commit_phase2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//生成树结构")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("filecoin_proofs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("seal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("seal_commit_phase1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//准备电路、存储证明需要的数据")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("filecoin_proofs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("seal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("seal_commit_phase2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//生成零知识证明{")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("storage_proofs_core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("compound_proof"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompoundProof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("circuit_proof")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输入params,生成groth proof")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("circuit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//构建CompoundProof's bellperson::Circuit")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("bellperson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("groth16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("prover"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_random_proof_batch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("prover"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_random_proof_batch_priority")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("prover"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_proof_batch_priority")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("rayon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadPool")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("rayon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadPoolBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("new")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("rayon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("multicore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("THREAD_POOL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("prover"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_proof_batch_priority_inner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("locks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("locked_kernel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("gpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("locks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LockedFFTKernel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("gpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("fft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFTKernel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("create"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fft"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("kernel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    fft_kern "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("gpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("fft"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFTKernel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        devices "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" rust"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gpu"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("opencl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Device")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        devices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("clone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        src "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("gpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("sources"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("kernel\n                        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("opencl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Program")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("from_opencl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                        program"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_buffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("EvaluationDomain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" fft_kern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("coset_fft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" fft_kern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" fft_kern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("coset_fft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" fft_kern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" fft_kern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                    c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("coset_fft")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mut")]),s._v(" fft_kern"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//->fft();//陪衬")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("gpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("multiexp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Arc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rayon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Registry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("in_worker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//没有线程就创建线程")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nvanilla proofs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DefaultOctLCTree")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br")])]),a("p",[s._v("rust-gpu-tools")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Buffer Brand Device Program\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ocl")]),s._v(" "),a("h4",{attrs:{id:"_5、rust-gpu-tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、rust-gpu-tools"}},[s._v("#")]),s._v(" 5、rust-gpu-tools")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200902184537572.png",alt:"image-20200902184537572"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200907214132511.png",alt:"image-20200907214132511"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200902171823778.png",alt:"image-20200902171823778"}})]),s._v(" "),a("h4",{attrs:{id:"问题及解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题及解决"}},[s._v("#")]),s._v(" 问题及解决")]),s._v(" "),a("h5",{attrs:{id:"os-error-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#os-error-13"}},[s._v("#")]),s._v(" os error 13")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo chown -R $(whoami) /Users/lowesyang/.cargo/\n拥有者皆设为I，群体的使用者 无\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"parameter不存在"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameter不存在"}},[s._v("#")]),s._v(" Parameter不存在")]),s._v(" "),a("p",[s._v("文件路径在"),a("code",[s._v("/var/tmp/filecoin-proof-parameters")]),s._v("，运行"),a("code",[s._v("cargo run --bin settings")]),s._v("可以查看")]),s._v(" "),a("h4",{attrs:{id:"上传参数文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传参数文件"}},[s._v("#")]),s._v(" 上传参数文件")]),s._v(" "),a("p",[s._v("https://proofs.filecoin.io/")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scp -P2222 v28-stacked-proof-of-replication-merkletree-poseidon_hasher-8-0-0-sha256_hasher-032d3138d22506ec0082ed72b2dcba18df18477904e35bafee82b3793b06832f.* public@dian.org.cn:/home/public\n\nscp -P44013 v28-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-0170db1f394b35d995252228ee359194b13199d259380541dc529fb0099096b0.* root@115.156.207.239:/var/tmp/filecoin-proof-parameters/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"批量下载参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#批量下载参数"}},[s._v("#")]),s._v(" 批量下载参数")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("params")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v28-stacked-proof-of-replication-merkletree-poseidon_hasher-8-0-0-sha256_hasher-032d3138d22506ec0082ed72b2dcba18df18477904e35bafee82b3793b06832f. v28-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-50c7368dea9593ed0989e70974d28024efa9d156d585b7eea1be22b2e753f331. v28-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-0170db1f394b35d995252228ee359194b13199d259380541dc529fb0099096b0. v28-proof-of-spacetime-fallback-merkletree-poseidon_hasher-8-0-0-3ea05428c9d11689f23529cde32fd30aabd50f7d2c93657c1d3650bca3e8ea9e."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://proofs.filecoin.io/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${i}")]),s._v("params\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://proofs.filecoin.io/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${i}")]),s._v("vk\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[s._v("#")]),s._v(" LOG")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("fn main() {\n    fil_logger::init();\n}\n\nRUST_LOG=filecoin_proofs=info\nRUST_LOG=trace\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("测试间隔时间")]),s._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Instant")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" proof_time "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("elapsed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[s._v("info!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"groth_proof_time: {:?}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" proof_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[s._v("fil"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("proofs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("tooling"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("::")])]),s._v("measure "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("->")]),s._v(" cpu_time wall"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("time\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"opencl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#opencl"}},[s._v("#")]),s._v(" OpenCL")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo cp -a /usr/local/cuda-10.0/include/CL/* /usr/local/include\nsudo cp -a /usr/local/cuda-10.0/lib64/* /usr/lib\nsudo echo '/usr/local/cuda-10.0/lib64/' >> /etc/ld.so.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt-get install nvidia-410-uvm nvidia-opencl-dev nvidia-modprobe nvidia-libopencl1-410 nvidia-opencl-icd-410\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("clinfo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看GPU")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lshw -C video\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("安装参考")]),s._v(" "),a("p",[s._v("https://www.cnblogs.com/vactor/p/9286425.html")]),s._v(" "),a("p",[s._v("安装驱动")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$version=450\nsudo apt-get install nvidia-<$version>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt-get install nvidia-opencl-dev nvidia-modprobe nvidia-libopencl1-$version nvidia-opencl-icd-$version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改文件大小")]),s._v(" "),a("p",[s._v("修改参数")]),s._v(" "),a("p",[s._v("docker内部安装驱动")]),s._v(" "),a("p",[s._v("在默认情况下Docker是不能访问任何device的, 为了能在Docker里访问显卡,必须加上--privileged=true的选项")]),s._v(" "),a("p",[s._v("为了能够在容器里面打开显示器,我们还需要在启动时指定DISPLAY")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://cn.download.nvidia.com/XFree86/Linux-x86_64/${VSESION_NAME}/NVIDIA-Linux-x86_64-${VSESION_NAME}.run\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"进展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进展"}},[s._v("#")]),s._v(" 进展")]),s._v(" "),a("h4",{attrs:{id:"_2020-9-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2020-9-6"}},[s._v("#")]),s._v(" 2020.9.6")]),s._v(" "),a("h5",{attrs:{id:"gpu-nvidia-1080ti"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gpu-nvidia-1080ti"}},[s._v("#")]),s._v(" GPU: \tNvidia 1080Ti")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("步骤")]),s._v(" "),a("th",[s._v("不使用GPU")]),s._v(" "),a("th",[s._v("使用OpenCL的耗时 ssector-size：2K")]),s._v(" "),a("th",[s._v("OpenCL sector-size：16K")]),s._v(" "),a("th",[s._v("OpenCL 128K")]),s._v(" "),a("th",[s._v("1M")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("add_piece数据补充完整")]),s._v(" "),a("td",[s._v("1")]),s._v(" "),a("td",[s._v("1")]),s._v(" "),a("td",[s._v("0")]),s._v(" "),a("td",[s._v("4")]),s._v(" "),a("td",[s._v("32")])]),s._v(" "),a("tr",[a("td",[s._v("precommit parse1数据编码")]),s._v(" "),a("td",[s._v("59")]),s._v(" "),a("td",[s._v("34")]),s._v(" "),a("td",[s._v("50")]),s._v(" "),a("td",[s._v("151")]),s._v(" "),a("td",[s._v("432")])]),s._v(" "),a("tr",[a("td",[s._v("precommit parse2生成树结构")]),s._v(" "),a("td",[s._v("83")]),s._v(" "),a("td",[s._v("83")]),s._v(" "),a("td",[s._v("163")]),s._v(" "),a("td",[s._v("211")]),s._v(" "),a("td",[s._v("439")])]),s._v(" "),a("tr",[a("td",[s._v("commit1准备电路需要的数据")]),s._v(" "),a("td",[s._v("5")]),s._v(" "),a("td",[s._v("7")]),s._v(" "),a("td",[s._v("10")]),s._v(" "),a("td",[s._v("12")]),s._v(" "),a("td",[s._v("14")])]),s._v(" "),a("tr",[a("td",[s._v("commit2生成零知识证明")]),s._v(" "),a("td",[s._v("64877")]),s._v(" "),a("td",[s._v("25896")]),s._v(" "),a("td",[s._v("28998")]),s._v(" "),a("td",[s._v("30793")]),s._v(" "),a("td",[s._v("35444")])]),s._v(" "),a("tr",[a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("RUST_LOG=INFO RUST_BACKTRACE=1 cargo run --release --bin benchy -- prodbench --config prodbench_inputs.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("主要耗时在零知识证明，使用OpenCL时耗时25秒；")]),s._v(" "),a("p",[s._v("零知识证明使用bellperson库，bellperson库会调用rust-gpu-tools库。")]),s._v(" "),a("p",[s._v("rust-gpu-tools库使用OpenCL，调用ifft函数进行快速傅里叶变换，multiexp进行幂指数运算。")]),s._v(" "),a("p",[s._v("bellman用cuda改写的相关代码仓库")]),s._v(" "),a("h5",{attrs:{id:"belle-cuda"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#belle-cuda"}},[s._v("#")]),s._v(" belle_cuda")]),s._v(" "),a("p",[s._v("包含ifft multiexp")]),s._v(" "),a("p",[s._v("parallel-bellman-ford")]),s._v(" "),a("h4",{attrs:{id:"_2020-9-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2020-9-17"}},[s._v("#")]),s._v(" 2020.9.17")]),s._v(" "),a("p",[s._v("学习PoRep和PoSt的计算过程")]),s._v(" "),a("p",[s._v("学习零知识证明基础")]),s._v(" "),a("p",[s._v("阅读bellman源码")]),s._v(" "),a("h2",{attrs:{id:"非中心化的数据结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非中心化的数据结构"}},[s._v("#")]),s._v(" 非中心化的数据结构")]),s._v(" "),a("p",[s._v("Decentralized Data Structures")]),s._v(" "),a("p",[s._v("内容寻址如何使我们能够信任分散 Web 上的对等方。内容寻址和内容标识符 （CID） 的概念是了解 Filecoin 如何验证存储的关键")]),s._v(" "),a("h2",{attrs:{id:"ipfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ipfs"}},[s._v("#")]),s._v(" IPFS")]),s._v(" "),a("p",[s._v("星际文件系统")]),s._v(" "),a("p",[s._v("merkle树")]),s._v(" "),a("p",[s._v("DAG")]),s._v(" "),a("h2",{attrs:{id:"教程资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#教程资源"}},[s._v("#")]),s._v(" 教程资源")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://proto.school",target:"_blank",rel:"noopener noreferrer"}},[s._v("关于分布式Web 协议的交互式教程"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://proto.school/verifying-storage-on-filecoin/resources",target:"_blank",rel:"noopener noreferrer"}},[s._v("Filecoin相关教程和论文"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://proto.school/anatomy-of-a-cid",target:"_blank",rel:"noopener noreferrer"}},[s._v("CID的解剖"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://spec.filecoin.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Filecoin Spec"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("公众号-星想法")]),s._v(" "),a("p",[s._v("[bellman源码分析](https://zhuanlan.zhihu.com/p/75539022")]),s._v(" "),a("h2",{attrs:{id:"log-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log-2"}},[s._v("#")]),s._v(" Log")]),s._v(" "),a("p",[s._v("学习PoRep和PoSt的计算过程")]),s._v(" "),a("p",[s._v("学习零知识证明基础")]),s._v(" "),a("p",[s._v("阅读bellman源码")]),s._v(" "),a("h5",{attrs:{id:"安装cmake"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装cmake"}},[s._v("#")]),s._v(" 安装cmake")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://cmake.org/files/v3.18/cmake-3.18.2-Linux-x86_64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf cmake-3.14.0.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" build-essential "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gcc g++")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" cmake-3.18.2-Linux-x86_64 /opt/cmake-3.18.2\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -sf /opt/cmake-3.18.2/bin/*  /usr/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("配置文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Czengdewei1%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200917091018303.png",alt:"image-20200917091018303"}})]),s._v(" "),a("p",[s._v("erc智能合约")]),s._v(" "),a("p",[s._v("转到tfc开发任务，也是存储，另外一种架构")]),s._v(" "),a("p",[s._v("tfc和filecoin连接")]),s._v(" "),a("p",[s._v("erc和esa")]),s._v(" "),a("p",[s._v("数据存储在bfc上，tfc制作bonus")]),s._v(" "),a("p",[s._v("任务：增加点以及绘制图")]),s._v(" "),a("p",[s._v("存储证明的抽取：")]),s._v(" "),a("p",[s._v("看懂lotus调用api的过程")]),s._v(" "),a("p",[s._v("windows-post进行证明，seal过程不用，关心存储和验证，")]),s._v(" "),a("p",[s._v("自己的seed种子发送，返回一个验证")]),s._v(" "),a("p",[s._v("给一个证明，得到结果")]),s._v(" "),a("h2",{attrs:{id:"lotus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lotus"}},[s._v("#")]),s._v(" lotus")]),s._v(" "),a("p",[s._v("编译安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mesa-opencl-icd ocl-icd-opencl-dev gcc "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" bzr jq pkg-config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -c https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz -O - "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xz -C /usr/local\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"export PATH='),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(':/usr/local/go/bin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.profile\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用 Go Modules 功能")]),s._v("\ngo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" -w "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GO111MODULE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on\ngo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" -w "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.aliyun.com/goproxy/,direct\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RUSTFLAGS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-C target-cpu=native -g"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("FFI_BUILD_FROM_SOURCE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" clean deps all\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# clang安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O - https://apt.llvm.org/llvm-snapshot.gpg.key "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\napt-add-repository "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-6.0 main"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y clang-6.0\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新子模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6844904039067418638",target:"_blank",rel:"noopener noreferrer"}},[s._v("源码分析"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"http://blog.studygolang.com/2012/12/go%E9%A1%B9%E7%9B%AE%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/",target:"_blank",rel:"noopener noreferrer"}},[s._v("GO项目的目录结构"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("作用到底是啥，给我的要求是存储证明的生成和验证接口，但是前提需要有区块和矿机地址等信息")]),s._v(" "),a("p",[s._v("完整的存储会包含所有的过程，只是precommit2，作为Sealer的方法")])])}),[],!1,null,null,null);t.default=e.exports}}]);